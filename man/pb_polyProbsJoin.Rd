% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/join_polygon.R
\name{pb_polyProbsJoin}
\alias{pb_polyProbsJoin}
\title{Probability-weighted polygon membership from a density buffer}
\usage{
pb_polyProbsJoin(
  point_sf,
  poly_sf,
  densityBuffer,
  templateRaster = NULL,
  point_id = "DHSID",
  poly_id = "ID_2",
  weight_name = "p",
  min_weight = 0
)
}
\arguments{
\item{point_sf}{`sf` POINT layer of displaced points (one geometry per ID).}

\item{poly_sf}{`sf` POLYGON/MULTIPOLYGON layer.}

\item{densityBuffer}{A density buffer object created by `pb_densityBuffer()`.}

\item{templateRaster}{Optional `RasterLayer` used as a template for rasterization
(CRS/resolution/extent). If `NULL`, the function will try to use the
densityBuffer's own raster metadata; if that is insufficient in your current
implementation of `pb_apply_densityBuffer()`, pass a template explicitly.}

\item{point_id}{Name of unique ID field in `point_sf`.}

\item{poly_id}{Name of unique ID field in `poly_sf`.}

\item{weight_name}{Output column name for probability mass (default `"p"`).}

\item{min_weight}{Drop candidate cells with weights <= min_weight (default 0).}
}
\value{
A list with:
  - `probs_long`: data.frame with columns `{point_id, poly_id, p}`
  - `poly_map`:  data.frame with one row per point: `{point_id, poly_id, p}`
}
\description{
For each displaced point, applies a `densityBuffer` (via `pb_apply_densityBuffer()`)
to generate a probability surface of plausible true locations. Candidate locations
(cell centers) are then joined to polygons and weights are aggregated to yield
a probability distribution over polygon membership.

This is the core building block for:
- admin-area membership probabilities
- Thiessen polygon probabilities (probabilistic "nearest facility")
}
